<div class="pane modal-lg" [@fadeUp]>
  <div class="pane-title" translate>sleep-detection.modals.enableForSleepDetector.title</div>

  <div class="pane-content" *ngIf="mode === 'INFO'">
    <p translate>sleep-detection.modals.enableForSleepDetector.info.intro</p>
    <p translate>sleep-detection.modals.enableForSleepDetector.info.stepPrefix</p>
    <ol>
      <li translate>sleep-detection.modals.enableForSleepDetector.info.step.1</li>
      <li translate>sleep-detection.modals.enableForSleepDetector.info.step.2</li>
      <li translate>sleep-detection.modals.enableForSleepDetector.info.step.3</li>
    </ol>
    <p translate>sleep-detection.modals.enableForSleepDetector.info.stepSuffix</p>

    <div class="current-calibration">
      <span translate>sleep-detection.modals.enableForSleepDetector.currentCalibration</span>
      <span>{{calibrationValue}}</span>
    </div>

    <div class="alert error" *ngIf="(openvr.status | async) !== 'INITIALIZED'" @vshrink>
      <div class="alert-bg"></div>
      <div class="alert-icon">
        <i class="material-icons"> error </i>
      </div>
      <div class="alert-content" translate>sleep-detection.modals.enableForSleepDetector.noSteamVR</div>
    </div>
  </div>

  <div class="pane-content center-pane" *ngIf="mode === 'PREPARE'">
    <h1 translate style="text-align: center">sleep-detection.modals.enableForSleepDetector.prepare.instruction</h1>
    <br>
    <p translate style="text-align: center">sleep-detection.modals.enableForSleepDetector.prepare.note</p>
    <div class="alert error" *ngIf="(openvr.status | async) !== 'INITIALIZED'" @vshrink>
      <div class="alert-bg"></div>
      <div class="alert-icon">
        <i class="material-icons"> error </i>
      </div>
      <div class="alert-content" translate>sleep-detection.modals.enableForSleepDetector.noSteamVR</div>
    </div>
  </div>

  <div class="pane-content center-pane" *ngIf="mode === 'COUNTDOWN'">
    <div class="large-spinner"></div>
    <h1 style="text-align: center" [translate]="'sleep-detection.modals.enableForSleepDetector.countdown.instruction'"
        [translateParams]="{'counter': countdownValue}"></h1>
    <p translate style="text-align: center; margin-top: 1em; white-space:pre-line">
      sleep-detection.modals.enableForSleepDetector.countdown.note</p>
  </div>

  <div class="pane-content center-pane" *ngIf="mode === 'CALIBRATING'">
    <div class="large-spinner"></div>
    <h1 translate style="text-align: center">sleep-detection.modals.enableForSleepDetector.calibrating.instruction</h1>
    <p translate style="text-align: center; margin-top: 1em">
      sleep-detection.modals.enableForSleepDetector.calibrating.note</p>
    <p style="text-align: center; margin-top: 1em"
       [translate]="'sleep-detection.modals.enableForSleepDetector.calibrating.countdown'"
       [translateParams]="{'counter': countdownValue}">
    </p>
  </div>

  <div class="pane-content center-pane" *ngIf="mode === 'DONE'">
    <h1 translate style="text-align: center">sleep-detection.modals.enableForSleepDetector.done.instruction</h1>
    <p translate style="text-align: center; margin-top: 1em">sleep-detection.modals.enableForSleepDetector.done.note</p>
    <div class="current-calibration">
      <span translate>sleep-detection.modals.enableForSleepDetector.currentCalibration</span>
      <span>{{calibrationValue}}</span>
    </div>
  </div>

  <div class="pane-actions spread" *ngIf="mode === 'INFO' || mode === 'PREPARE'" @vshrink>
    <button class="btn btn-secondary" (click)="close()" translate>shared.modals.cancel</button>
    <button class="btn btn-primary" (click)="startCalibration()" translate
            [disabled]="(openvr.status | async) !== 'INITIALIZED'">
      sleep-detection.modals.enableForSleepDetector.startCalibration
    </button>
  </div>
  <div class="pane-actions spread" *ngIf="mode === 'DONE'" @vshrink>
    <button class="btn btn-secondary" (click)="startCalibration()" translate>
      sleep-detection.modals.enableForSleepDetector.restartCalibration
    </button>
    <button class="btn btn-primary" (click)="close()" translate>shared.modals.close</button>
  </div>
</div>
