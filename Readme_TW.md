<h2 align="center">請注意，該自述文件已經過時<br>更新的（英文）文件可在此處找到: <a href="https://github.com/Raphiiko/OyasumiVR/blob/develop/README.md">README.md</a></h3>

<p align="center">
    <img src="https://github.com/Raphiiko/Oyasumi/blob/develop/docs/img/logo_light.png?raw=true#gh-light-mode-only" width="450">
    <img src="https://github.com/Raphiiko/Oyasumi/blob/develop/docs/img/logo_dark.png?raw=true#gh-dark-mode-only" width="450">
    <br/>
    <br/>
    :zzz: 一個用於在虛擬現實中幫助睡眠的工具集合。:zzz:
</p>

<p align="center">
    <a><img alt="最新版本" src="https://img.shields.io/github/v/tag/Raphiiko/Oyasumi?color=informational&label=version&sort=semver"></a>
    <a><img alt="正式版建構狀態" src="https://github.com/Raphiiko/Oyasumi/actions/workflows/build-release.yml/badge.svg"/></a>
    <a><img alt="開發版建構狀態" src="https://github.com/Raphiiko/Oyasumi/actions/workflows/build-development.yml/badge.svg"/></a>
    <a href="https://github.com/Raphiiko/Oyasumi/blob/develop/LICENSE"><img alt="許可證" src="https://img.shields.io/github/license/Raphiiko/Oyasumi"></a>
    <br>
    <a href="https://discord.gg/7MqdPJhYxC"><img alt="Discord 徽章" src="https://img.shields.io/discord/1023672078672609382?color=5865f2&label=Discord&logo=discord&logoColor=https%3A%2F%2Fshields.io%2Fcategory%2Fother"/></a>
    <a href="https://raphiiko.booth.pm/items/4216880"><img alt="Booth.pm 頁面" src="https://img.shields.io/badge/Store-BOOTH.PM-red"/></a>
    <a href="https://raphiiko.gumroad.com/l/oyasumi?layout=profile"><img alt="Gumroad 頁面" src="https://img.shields.io/badge/Store-Gumroad-important"/></a>
</p>

<p align="center">
  Oyasumi是一個用於在虛擬現實（VRChat）中幫助睡眠的開源工具。
  <br>
  Oyasumiは虛擬現實中幫助睡眠的開源工具軟體。
  <br>
  您可以在 <a href="https://raphiiko.booth.pm/items/4216880">booth.pm的商店頁面</a> 上找到日本語的說明。
</p>

<p align="center">
  如果您想交流，歡迎加入我們的 <a href="https://discord.gg/7MqdPJhYxC"><img src="https://user-images.githubusercontent.com/111654848/192362041-f09cc066-a964-446f-aa2c-fa7a7a31ec05.png" width="16" style="fill: white" /> Discord 伺服器</a>！
</p>

## 入門

在 [Releases](https://github.com/Raphiiko/Oyasumi/releases) 頁面上獲取最新的安裝程式。

<p align="center">
<table>
<tr>
<td><p align="center"><b>概觀</b></p></td>
<td><p align="center"><b>睡眠動畫</b></p></td>
<td><p align="center"><b>GPU 功率限制</b></p></td>
<td><p align="center"><b>MSI Afterburner 自動化</b></p></td>
<td><p align="center"><b>睡眠檢測</b></p></td>
</tr>
<td><p align="center"><img src="https://user-images.githubusercontent.com/111654848/229172557-9df82c8c-697d-490a-98d6-e055b06b6367.png" width="100%" crossorigin></p></td>
<td><p align="center"><img src="https://user-images.githubusercontent.com/111654848/229172232-54285875-5242-46bb-9254-7ba41549fb84.png" width="100%" crossorigin></p></td>
<td><p align="center"><img src="https://user-images.githubusercontent.com/111654848/229172301-6739bca9-925b-4d3e-be21-1379ccf55c9f.png" width="100%" crossorigin></p></td>
<td><p align="center"><img src="https://user-images.githubusercontent.com/111654848/229172397-f4b09cf8-f8e1-4803-aeef-974abcded722.png" width="100%" crossorigin></p></td>
<td><p align="center"><img src="https://user-images.githubusercontent.com/111654848/229172492-2223b914-c231-47f7-8b8a-61bd487017bc.png" width="100%" crossorigin></p></td>
</tr>
<tr>
<td><p align="center"><b>狀態自動化</b></p></td>
<td><p align="center"><b>解析度自動化</b></p></td>
<td><p align="center"><b>自動接受邀請請求</b></p></td>
<td><p align="center"><b>電池自動化</b></p></td>
<td><p align="center"><b>亮度自動化</b></p></td>
</tr>
<tr>
<td><p align="center"><img src="https://user-images.githubusercontent.com/111654848/229172710-ee10a31e-899a-4337-88c1-83005d2f211b.png" width="100%" crossorigin></p></td>
<td><p align="center"><img src="https://user-images.githubusercontent.com/111654848/229173014-db751c21-1956-446c-88c2-f6f870ea9767.png" width="100%" crossorigin></p></td>
<td><p align="center"><img src="https://user-images.githubusercontent.com/111654848/229172786-73c85c96-a758-437a-a102-884d47957067.png" width="100%" crossorigin></p></td>
<td><p align="center"><img src="https://user-images.githubusercontent.com/111654848/229172848-20896789-60a2-4e9a-8795-19ae2bb3c276.png" width="100%" crossorigin></p></td>
<td><p align="center"><img src="https://user-images.githubusercontent.com/111654848/229172896-f95d89e1-3beb-4a0e-9b5d-2b7c82badd86.png" width="100%" crossorigin></p></td>
</tr>
</table>
</p>

## 功能

<table align="right">
<tr><td><img src="https://user-images.githubusercontent.com/111654848/198073951-85a52109-6fad-4edd-ad53-897a6d8adf12.gif" width="300"></td></tr>
<tr><td><img src="https://user-images.githubusercontent.com/111654848/198073192-efa203e3-95e5-4961-a210-65e30b33cc68.gif" width="300"></td></tr>
</table>

- :electric_plug: GPU 自動化:
  - 當您入睡或醒來時：
    - 啟動您的 [MSI Afterburner](https://www.msi.com/Landing/afterburner/graphics-cards) 配置檔（NVIDIA/AMD）
    - 調整功率限制（NVIDIA）
- :battery: 電池自動化:
  - 在您入睡時自動關閉追踪器和/或控制器：
    - 這樣您早上起床時仍然有一些電力！
    - 將它們放在充電器上時
- :large_blue_circle: VRChat 狀態自動化
  - 根據您所在世界的玩家數量自動更改您的狀態：
    <br>_當您獨自入睡時切換到藍色，這樣您的朋友就可以加入您，而當周圍有足夠多的人時切換到橙色！_
- :wrench: 一鍵關閉所有追踪器和/或控制器。
- :email: 自動接受 VRChat 的邀請請求
  - 在您入睡時自動讓朋友進來！
  - 使用黑名單或白名單配置要接受的邀請請求。
- :low_brightness: 自動平滑調節顯示亮度（Valve Index）
  - 允許您在入睡時逐漸降低頭戴式顯示器的亮度
- :eyeglasses: 自動調節 SteamVR 的渲染解析度
  - 允許您在入睡時降低頭戴式顯示器的渲染解析度
- :calling: [預設的表情選單](https://github.com/Raphiiko/Oyasumi/wiki/Oyasumi-Expression-Menu)，可在 VRChat 內直接控制某些功能
- :dizzy: 自動睡眠動畫和姿勢檢測
  - 根據您的睡姿自動切換您的角色睡眠動畫。
  - 使用附帶的 OSC 腳本編輯器觸發您自己的動畫。
  - 為常用的移動方式資源提供預設值，包括：
    - [ごろ寝システム v2.2 - 2.3](https://minminmart.booth.pm/items/2886739) by [みんみんみーん](https://twitter.com/minminmeeean)
      <br>(Sleep System v2.2 - 2.3 by minminmiin)
      <br>(也支援 [EX 版本](https://booth.pm/en/items/4233545)！)
    - [GoGo Loco v1.7.1+](https://booth.pm/en/items/3290806) by [franada](https://twitter.com/franada)
      <br>(對於 1.6.2 - 1.7.0，也可提供半功能性的解決方案)
- :zzz: 自動啟動/停用睡眠模式，觸發自動化
  - 检测入睡：
    - 当Oyasumi根据您的运动猜测您正在入睡时
    - 当控制器或追踪器电池电量低于阈值时
    - 当关闭控制器时
    - 根据时间表
  - 检测醒来：
    - 当打开控制器或追踪器时
    - 根据时间表
    - 当SteamVR停止时
- 🗺️ 多语言支持
  - 英语
  - 荷兰语（Nederlands）
  - 日语（日本語）（外包 + 社区贡献者：[なき](https://twitter.com/NoYu_idea)）
  - 韩语\*（한국어）（社区贡献者：[Soumt](https://github.com/soumt-r)）
  - 繁体中文\*（繁體中文）（社区贡献者：[狐 Kon](https://github.com/XoF-eLtTiL)）
  - 简体中文\*（简体中文）（社区贡献者：[狐 Kon](https://github.com/XoF-eLtTiL)）
  - 法语（Français）\*（社区贡献者：[neuroblack](https://github.com/neuroblack)）

如果您希望帮助添加更多语言和/或缺失的翻译，请查看 [添加翻译的 wiki 页面](https://github.com/Raphiiko/Oyasumi/wiki/Adding-Translations) 以获取开始的说明！

_(\*) 该语言的支持是社区贡献的，因此翻译可能无法与每个更新完全覆盖。_

### 使用的工具

Oyasumi使用 [Angular](https://angular.io/) 和 [Tauri](https://tauri.app/) 构建。

## 支持的设备

### 电池自动化

目前，Oyasumi支持所有支持以下功能的SteamVR设备：

1. 支持报告电池电量和充电状态
2. 支持通过SteamVR关闭

这包括但不限于以下设备：

- HTC Vive 控制器/手柄
- Index 控制器/手柄
- Vive 追踪器（1.0/2.0/3.0）
- Tundra 追踪器\*

这意味着任何Oculus控制器都不太可能工作，除非SlimeVR在其 [OpenVR 驱动程序](https://github.com/SlimeVR/SlimeVR-OpenVR-Driver) 中实现了这个功能。

_(\*) Tundra 追踪器的电池电量和充电状态报告非常延迟。这意味着尽管自动化仍然有效，但它们将非常延迟（分钟级别），除非Tundra在其追踪器固件中修复此问题。 (https://forum.tundra-labs.com/t/firmware-issues/746)_

### GPU 自动化

任何受 MSI Afterburner 支持的 NVIDIA 或 AMD 显卡都可以通过 Oyasumi 激活您在 MSI Afterburner 中设置的配置文件。

直接使用 Oyasumi 控制显卡的功率限制仅支持 NVIDIA 显卡。AMD 用户将需要使用 MSI Afterburner 配置文件自动化来控制功率限制。

### 显示亮度自动化

目前，这些自动化仅在 Valve Index 上受支持。

支持通过调整图像亮度来支持更多头显是 [计划中的未来发布功能](https://github.com/Raphiiko/Oyasumi/issues/14)。

## 开发

### 先决条件

#### Rust & Tauri
开始 Oyasumi 的开发之前，请首先遵循 Tauri 的 [先决条件](https://tauri.app/v1/guides/getting-started/prerequisites)。

这包括安装 VS C++ 构建工具、WebView2 和 Rust。

#### Clang
接下来，您需要[安装 clang](https://rust-lang.github.io/rust-bindgen/requirements.html#windows)。这是生成与 OpenVR 的绑定所必需的。

根据链接的指南，确保：
1. 安装 Clang（例如，通过 `winget install LLVM.LLVM`）
2. 将 `LIBCLANG_PATH` 环境变量设置为 LLVM 安装的 `bin` 目录。

#### NodeJS
接下来，安装 [NodeJS](https://nodejs.org/en/download/)。这是构建 UI 和覆盖层的 Web 前端所必需的。

### 设置项目

一旦您设置了这些依赖项，您可以按照以下步骤继续：

1. 在您的计算机上克隆 Oyasumi：`git clone https://github.com/Raphiiko/OyasumiVR.git`
2. 进入新项目目录：`cd OyasumiVR`
3. 从 NPM 安装主 UI 的依赖项：`npm install`
4. 至少运行一次 `npm run build`。

一旦这一步顺利完成，您可以运行 `npm run dev` 在本地运行 Oyasumi 并开始开发！

## VRChat

Oyasumi 的某些功能需要您使用 VRChat 帐户登录才能正常工作（例如状态自动化）。

只有依赖此功能的功能需要进行身份验证。您可以在不提供凭据的情况下使用不依赖此功能的功能。
您的登录凭据永远不会被存储在任何地方，只会发送到 VRChat 的服务器进行身份验证。

Oyasumi 不被 VRChat 支持，不代表 VRChat 或其开发人员的官方产品。在使用 Oyasumi 时，请遵守 VRChat 的使用条款和条件。如果您遇到与 VRChat 相关的问题，请联系 VRChat 的支持团队。
